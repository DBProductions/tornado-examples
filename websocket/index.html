<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Websocket example</title>
    </head>
    <body>
        This example only send data over a websocket and receive same data back.
    	<div id="output"></div>
        <script>
        var ws = new WebSocket("ws://localhost:8888/websocket");
        ws.onopen = function() {            
            setInterval(function() {
                ws.send('{"type":"websocket","ts":' + (+new Date()) + '}');  
            }, 1000);
        };
        ws.onmessage = function (evt) {
            document.querySelector('#output').innerHTML = evt.data;
        };
        </script>
    </body>
</html>