<!DOCTYPE html>
<html>
	<head>
	    <script src="http://cdn.sockjs.org/sockjs-0.3.min.js"></script>
	    <script>
	    window.onload = function() {
	        var conn = null;	
	        conn = new SockJS('http://' + window.location.host + '/echo');
	        conn.onopen = function() {
	            console.log('Connected');
	        };
	        conn.onmessage = function(e) {
	            document.querySelector('#output').innerHTML += '<br />' + e.data;
	        };
	        conn.onclose = function() {
	            conn = null;          
	        };
	        var sender = document.querySelector('#send');
	        sender.addEventListener('click', function(e) {
	        	e.preventDefault();
	        	var text = document.querySelector('#text').value;
	        	conn.send(text);
	        	return false;
	        }, false);
	    }
	    </script>
	</head>
	<body>
		<h1>Tornado &amp; SockJS</h1>
		<div><input id="text" type="text"><input id="send" type="submit"></div>
		<div id="output"></div>
	</body>
</html>
